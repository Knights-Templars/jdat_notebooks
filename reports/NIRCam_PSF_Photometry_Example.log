Traceback (most recent call last):
  File "/usr/share/miniconda/lib/python3.9/site-packages/jupyter_cache/executors/utils.py", line 51, in single_nb_execution
    executenb(
  File "/usr/share/miniconda/lib/python3.9/site-packages/nbclient/client.py", line 1204, in execute
    return NotebookClient(nb=nb, resources=resources, km=km, **kwargs).execute()
  File "/usr/share/miniconda/lib/python3.9/site-packages/nbclient/util.py", line 84, in wrapped
    return just_run(coro(*args, **kwargs))
  File "/usr/share/miniconda/lib/python3.9/site-packages/nbclient/util.py", line 62, in just_run
    return loop.run_until_complete(coro)
  File "/usr/share/miniconda/lib/python3.9/asyncio/base_events.py", line 642, in run_until_complete
    return future.result()
  File "/usr/share/miniconda/lib/python3.9/site-packages/nbclient/client.py", line 663, in async_execute
    await self.async_execute_cell(
  File "/usr/share/miniconda/lib/python3.9/site-packages/nbclient/client.py", line 965, in async_execute_cell
    await self._check_raise_for_error(cell, cell_index, exec_reply)
  File "/usr/share/miniconda/lib/python3.9/site-packages/nbclient/client.py", line 862, in _check_raise_for_error
    raise CellExecutionError.from_cell_and_msg(cell, exec_reply_content)
nbclient.exceptions.CellExecutionError: An error occurred while executing the following cell:
------------------
for det in dets_short:
    for filt in filts_short:
        create_psf_model(fov=11, num=25, create_grid=False, save_psf=False, detsampled=False)
------------------

[0;31m---------------------------------------------------------------------------[0m
[0;31mOSError[0m                                   Traceback (most recent call last)
Input [0;32mIn [11][0m, in [0;36m<cell line: 1>[0;34m()[0m
[1;32m      1[0m [38;5;28;01mfor[39;00m det [38;5;129;01min[39;00m dets_short:
[1;32m      2[0m     [38;5;28;01mfor[39;00m filt [38;5;129;01min[39;00m filts_short:
[0;32m----> 3[0m         [43mcreate_psf_model[49m[43m([49m[43mfov[49m[38;5;241;43m=[39;49m[38;5;241;43m11[39;49m[43m,[49m[43m [49m[43mnum[49m[38;5;241;43m=[39;49m[38;5;241;43m25[39;49m[43m,[49m[43m [49m[43mcreate_grid[49m[38;5;241;43m=[39;49m[38;5;28;43;01mFalse[39;49;00m[43m,[49m[43m [49m[43msave_psf[49m[38;5;241;43m=[39;49m[38;5;28;43;01mFalse[39;49;00m[43m,[49m[43m [49m[43mdetsampled[49m[38;5;241;43m=[39;49m[38;5;28;43;01mFalse[39;49;00m[43m)[49m

Input [0;32mIn [10][0m, in [0;36mcreate_psf_model[0;34m(fov, create_grid, num, save_psf, detsampled)[0m
[1;32m      1[0m [38;5;28;01mdef[39;00m [38;5;21mcreate_psf_model[39m(fov[38;5;241m=[39m[38;5;241m11[39m, create_grid[38;5;241m=[39m[38;5;28;01mFalse[39;00m, num[38;5;241m=[39m[38;5;241m9[39m, save_psf[38;5;241m=[39m[38;5;28;01mFalse[39;00m, detsampled[38;5;241m=[39m[38;5;28;01mFalse[39;00m):
[0;32m----> 3[0m     nrc [38;5;241m=[39m [43mwebbpsf[49m[38;5;241;43m.[39;49m[43mNIRCam[49m[43m([49m[43m)[49m
[1;32m      5[0m     nrc[38;5;241m.[39mdetector [38;5;241m=[39m det 
[1;32m      6[0m     nrc[38;5;241m.[39mfilter [38;5;241m=[39m filt

File [0;32m/usr/share/miniconda/lib/python3.9/site-packages/webbpsf/webbpsf_core.py:1683[0m, in [0;36mNIRCam.__init__[0;34m(self)[0m
[1;32m   1680[0m [38;5;28mself[39m[38;5;241m.[39m_filter [38;5;241m=[39m [38;5;124m'[39m[38;5;124mF200W[39m[38;5;124m'[39m
[1;32m   1681[0m [38;5;28mself[39m[38;5;241m.[39m_detector [38;5;241m=[39m [38;5;124m'[39m[38;5;124mNRCA1[39m[38;5;124m'[39m
[0;32m-> 1683[0m [43mJWInstrument[49m[38;5;241;43m.[39;49m[38;5;21;43m__init__[39;49m[43m([49m[38;5;28;43mself[39;49m[43m,[49m[43m [49m[38;5;124;43m"[39;49m[38;5;124;43mNIRCam[39;49m[38;5;124;43m"[39;49m[43m)[49m  [38;5;66;03m# do this after setting the long & short scales.[39;00m
[1;32m   1684[0m [38;5;28mself[39m[38;5;241m.[39m_detector [38;5;241m=[39m [38;5;124m'[39m[38;5;124mNRCA1[39m[38;5;124m'[39m [38;5;66;03m# Must re-do this after superclass init since that sets it to None.[39;00m
[1;32m   1685[0m                          [38;5;66;03m# This is an annoying workaround to ensure all the auto-channel stuff is ok[39;00m

File [0;32m/usr/share/miniconda/lib/python3.9/site-packages/webbpsf/webbpsf_core.py:766[0m, in [0;36mJWInstrument.__init__[0;34m(self, *args, **kwargs)[0m
[1;32m    765[0m [38;5;28;01mdef[39;00m [38;5;21m__init__[39m([38;5;28mself[39m, [38;5;241m*[39margs, [38;5;241m*[39m[38;5;241m*[39mkwargs):
[0;32m--> 766[0m     [38;5;28;43msuper[39;49m[43m([49m[43mJWInstrument[49m[43m,[49m[43m [49m[38;5;28;43mself[39;49m[43m)[49m[38;5;241;43m.[39;49m[38;5;21;43m__init__[39;49m[43m([49m[38;5;241;43m*[39;49m[43margs[49m[43m,[49m[43m [49m[38;5;241;43m*[39;49m[38;5;241;43m*[39;49m[43mkwargs[49m[43m)[49m
[1;32m    768[0m     [38;5;28mself[39m[38;5;241m.[39msiaf [38;5;241m=[39m pysiaf[38;5;241m.[39mSiaf([38;5;28mself[39m[38;5;241m.[39mname)
[1;32m    770[0m     opd_path [38;5;241m=[39m os[38;5;241m.[39mpath[38;5;241m.[39mjoin([38;5;28mself[39m[38;5;241m.[39m_datapath, [38;5;124m'[39m[38;5;124mOPD[39m[38;5;124m'[39m)

File [0;32m/usr/share/miniconda/lib/python3.9/site-packages/webbpsf/webbpsf_core.py:174[0m, in [0;36mSpaceTelescopeInstrument.__init__[0;34m(self, name, pixelscale)[0m
[1;32m    171[0m [38;5;28;01mdef[39;00m [38;5;21m__init__[39m([38;5;28mself[39m, name[38;5;241m=[39m[38;5;124m"[39m[38;5;124m"[39m, pixelscale[38;5;241m=[39m[38;5;241m0.064[39m):
[1;32m    172[0m     [38;5;28mself[39m[38;5;241m.[39mname [38;5;241m=[39m name
[0;32m--> 174[0m     [38;5;28mself[39m[38;5;241m.[39m_WebbPSF_basepath, [38;5;28mself[39m[38;5;241m.[39m_data_version [38;5;241m=[39m [43mutils[49m[38;5;241;43m.[39;49m[43mget_webbpsf_data_path[49m[43m([49m
[1;32m    175[0m [43m        [49m[43mdata_version_min[49m[38;5;241;43m=[39;49m[43mDATA_VERSION_MIN[49m[43m,[49m[43m [49m[43mreturn_version[49m[38;5;241;43m=[39;49m[38;5;28;43;01mTrue[39;49;00m[43m)[49m
[1;32m    177[0m     [38;5;28mself[39m[38;5;241m.[39m_datapath [38;5;241m=[39m os[38;5;241m.[39mpath[38;5;241m.[39mjoin([38;5;28mself[39m[38;5;241m.[39m_WebbPSF_basepath, [38;5;28mself[39m[38;5;241m.[39mname)
[1;32m    178[0m     [38;5;28mself[39m[38;5;241m.[39m_image_mask [38;5;241m=[39m [38;5;28;01mNone[39;00m

File [0;32m/usr/share/miniconda/lib/python3.9/site-packages/webbpsf/utils.py:202[0m, in [0;36mget_webbpsf_data_path[0;34m(data_version_min, return_version)[0m
[1;32m    200[0m     path [38;5;241m=[39m os[38;5;241m.[39mgetenv([38;5;124m'[39m[38;5;124mWEBBPSF_PATH[39m[38;5;124m'[39m)
[1;32m    201[0m     [38;5;28;01mif[39;00m path [38;5;129;01mis[39;00m [38;5;28;01mNone[39;00m:
[0;32m--> 202[0m         [38;5;28;01mraise[39;00m [38;5;167;01mEnvironmentError[39;00m([38;5;124mf[39m[38;5;124m"[39m[38;5;124mEnvironment variable $WEBBPSF_PATH is not set![39m[38;5;130;01m\n[39;00m[38;5;132;01m{[39;00mMISSING_WEBBPSF_DATA_MESSAGE[38;5;132;01m}[39;00m[38;5;124m"[39m)
[1;32m    203[0m [38;5;28;01melse[39;00m:
[1;32m    204[0m     path [38;5;241m=[39m path_from_config

[0;31mOSError[0m: Environment variable $WEBBPSF_PATH is not set!

 ***********  ERROR  ******  ERROR  ******  ERROR  ******  ERROR  ***********
 *                                                                          *
 *  WebbPSF requires several data files to operate.                         *
 *  These files could not be located automatically at this time, or this    *
 *  version of the software requires a newer set of reference files than    *
 *  you have installed.  For more details see:                              *
 *                                                                          *
 *        https://webbpsf.readthedocs.io/en/stable/installation.html        *
 *                                                                          *
 *  under "Installing the Required Data Files".                             *
 *  WebbPSF will not be able to function properly until the appropriate     *
 *  reference files have been downloaded to your machine and installed.     *
 *                                                                          *
 ****************************************************************************

OSError: Environment variable $WEBBPSF_PATH is not set!

 ***********  ERROR  ******  ERROR  ******  ERROR  ******  ERROR  ***********
 *                                                                          *
 *  WebbPSF requires several data files to operate.                         *
 *  These files could not be located automatically at this time, or this    *
 *  version of the software requires a newer set of reference files than    *
 *  you have installed.  For more details see:                              *
 *                                                                          *
 *        https://webbpsf.readthedocs.io/en/stable/installation.html        *
 *                                                                          *
 *  under "Installing the Required Data Files".                             *
 *  WebbPSF will not be able to function properly until the appropriate     *
 *  reference files have been downloaded to your machine and installed.     *
 *                                                                          *
 ****************************************************************************


